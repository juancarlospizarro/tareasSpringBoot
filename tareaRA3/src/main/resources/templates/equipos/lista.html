<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Listado de Equipos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Listado de Equipos</h1>
		<div class="d-flex justify-content-between align-items-center">
			<a th:href="@{/equipos/nuevo}" class="btn btn-success mx-2">
	            Añadir equipo
	        </a>
			<a th:href="@{/}" class="btn btn-secondary text-white">
	            Volver a inicio
	        </a>
		</div>
        
    </div>
	<form th:action="@{/equipos}" method="get" class="row g-2 mb-4">
						    <div class="col-md-2">
						        <input type="text" name="nombre" class="form-control" placeholder="Buscar por nombre"				               th:value="${nombre}">
						    </div>
						    <div class="col-md-1">
						        <button type="submit" class="btn btn-primary w-100">
						            Buscar
						        </button>
						    </div>
						    <div class="col-md-1">
						        <a th:href="@{/equipos}" class="btn btn-secondary w-100">
						            Borrar
						        </a>
						    </div>
						</form>

    <div class="card shadow">
        <div class="card-body">
            <table class="table table-striped table-hover align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Nombre</th>
                        <th>Año de fundación</th>
                        <th>Ciudad</th>
                        <th class="text-center">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="equipo : ${equipos}">
                        <td th:text="${equipo.nombre}"></td>
                        <td th:text="${equipo.anio_fundacion}"></td>
                        <td th:text="${equipo.ciudad}"></td>
                        <td class="text-center">
							<a th:href="@{/equipos/{id}(id=${equipo.id})}"
							   class="btn btn-sm btn-secondary me-2 text-white">
							    Detalles
							</a>
                            <a th:href="@{/equipos/{id}/editar(id=${equipo.id})}" 
                               class="btn btn-sm btn-warning me-2">
                                Editar
                            </a>
							<button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal"
							        th:attr="data-bs-target='#modalEliminar-' + ${equipo.id}">
								Eliminar
							</button>
							<div class="modal fade"
							     th:id="'modalEliminar-' + ${equipo.id}"
							     tabindex="-1">
							    <div class="modal-dialog">
							        <div class="modal-content">

							            <div class="modal-header bg-danger text-white">
							                <h5 class="modal-title">Confirmar eliminación</h5>
							                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
							            </div>

							            <div class="modal-body">
							                ¿Seguro que deseas eliminar el equipo
							                <strong th:text="${equipo.nombre}"></strong>?
							            </div>

							            <div class="modal-footer">
							                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
							                    Cancelar
							                </button>

							                <form th:action="@{/equipos/{id}/eliminar(id=${equipo.id})}" method="post">
							                    <button type="submit" class="btn btn-danger">
							                        Eliminar
							                    </button>
							                </form>
							            </div>

							        </div>
							    </div>
							</div>
                        </td>
                    </tr>
                </tbody>
            </table>
			
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
